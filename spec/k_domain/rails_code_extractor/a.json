{
  "class_name": "Sample",
  "default_scope": {
    "block": "{ where(deleted: false) }"
  },
  "scopes": [
    {
      "name": "has_geo",
      "opts": {
      },
      "block": "-> { where.not(longitude: nil, latitude: nil) }"
    },
    {
      "name": "has_address",
      "opts": {
      },
      "block": "lambda {\n    where.not(address: nil)\n  }"
    }
  ],
  "belongs_to": [
    {
      "name": "app_user",
      "opts": {
      },
      "block": null
    },
    {
      "name": "tenant",
      "opts": {
      },
      "block": null
    },
    {
      "name": "user",
      "opts": {
        "class_name": "User",
        "foreign_key": "id",
        "primary_key": "sales_user_id"
      },
      "block": null
    }
  ],
  "has_one": [
    {
      "name": "user",
      "opts": {
        "class_name": "User",
        "foreign_key": "id",
        "primary_key": "sales_user_id"
      },
      "block": null
    }
  ],
  "has_many": [
    {
      "name": "user",
      "opts": {
        "class_name": "User",
        "foreign_key": "id",
        "primary_key": "sales_user_id"
      },
      "block": null
    },
    {
      "name": "tasks",
      "opts": {
        "as": "taskable"
      },
      "block": null
    },
    {
      "name": "messages",
      "opts": {
        "class_name": "CampaignMessage",
        "dependent": "destroy"
      },
      "block": null
    },
    {
      "name": "trackers",
      "opts": {
        "through": "messages"
      },
      "block": null
    },
    {
      "name": "hits",
      "opts": {
        "through": "trackers"
      },
      "block": null
    },
    {
      "name": "orders",
      "opts": {
        "inverse_of": "company"
      },
      "block": null
    }
  ],
  "has_and_belongs_to_many": [
    {
      "name": "trackers",
      "opts": {
      },
      "block": "-> { uniq }"
    },
    {
      "name": "contact_lists",
      "opts": {
        "autosave": true
      },
      "block": "-> { uniq }, autosave: true"
    }
  ],
  "validate": [
    {
      "names": [
        "ensure_valid_financial_year"
      ],
      "opts": {
        "on": "create"
      },
      "block": null
    },
    {
      "names": [
        "name_must_be_unique",
        "name_must_not_be_in_global"
      ],
      "opts": {
      },
      "block": null
    },
    {
      "names": [
        "check_email_valid"
      ],
      "opts": {
      },
      "block": null
    }
  ],
  "validates": [
    {
      "name": "user",
      "opts": {
        "presence": {
          "message": "must exist"
        }
      }
    },
    {
      "name": "tenant",
      "opts": {
        "presence": {
          "message": "must exist"
        }
      }
    },
    {
      "name": "first_name",
      "opts": {
        "presence": {
          "message": "First Name is required."
        },
        "on": "create"
      }
    },
    {
      "name": "email",
      "opts": {
        "format": "(?i-mx:\\A[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,6}\\z)"
      }
    },
    {
      "name": "password",
      "opts": {
        "length": {
          "minimum": 8,
          "message": "8+ characters"
        },
        "unless": "skip_password_validation"
      }
    }
  ]
}